# BetterPvZ2 自动化脚本

本项目用于自动化操作《植物大战僵尸2中文版》，支持对OPPO K12设备（Physical size: 1080x2412）进行自动化操作。主要功能包括自动收集阳光、种植植物（如向日葵、仙人掌）以及控制槲寄冰仙子（冰炮）的发射打击僵尸。

本程序所采用植物均为易获取或新手赠送，所以战斗策略较通用。

**我们的目标是做出像 [BetterGI](https://github.com/babalae/better-genshin-impact) 一样好用的 [BetterPvZ2](https://github.com/LeNotFound/BetterPvZ2)！**

## 功能简介

- **阳光采集**  
  利用 adb 截图与滑动操作对第一列每个格子进行并行采集，保证充足阳光。

- **植物种植**  
  按照制定的策略自动在指定格子中种植向日葵和仙人掌。  
  ※ 向日葵用于持续生成阳光；仙人掌用于防守僵尸侵袭。

- **僵尸检测**  
  利用截图对比判断第九列每个格子的状态变化，实时检测僵尸风险，并将风险行放入队列。

- **冰炮控制（槲寄冰仙子）**  
  部署在第三列的冰炮（槲寄冰仙子）会根据实时检测信息自动发射。  
  发射目标为僵尸前一格，目标由实时比较当前格子与初始状态的差异确定，冷却时间为15秒，发射后发射时间更新。

- **战斗策略**  
  根据实时检测的僵尸风险，自动调整种植策略。v
  支持手动在 `main()` 中自定义战斗策略。

## 环境要求

- Python 3.x  
- 第三方库：  
  - easyocr  
  - Pillow  
  - numpy  

## 使用方法
```bash
pip install -r requirements.txt
python main.py
```

* 在基础关卡，点击开始游戏后运行 `main.py`
* 仙人掌放在第 2 个卡槽，向日葵放在第 7 个卡槽，槲寄冰仙子放在第 8 个卡槽
* 若存在多个 adb 设备，请自行修改指令以支持

## To Do
~~什么大型卫星发射仪式~~
- [ ] 设计本项目的 logo 以及完善 README
- [ ] 加入日志系统，控制台输出统一保存到日志
- [ ] 创建项目主页，初步计划使用和 BetterGI 一样的 <https://theme-hope.vuejs.press/zh/>
- [ ] 支持拖动矿车操作
- [ ] 创建自定义策略接口，支持特殊关卡（如狂野西部矿车等）
- [ ] 创建战斗策略仓库，社区可贡献特定关卡（如限制使用选定植物的关卡）的战斗策略
- [ ] 训练 Yolo 实时检测僵尸，识别植物卡片以及价格，更精确地战斗
- [ ] 开发 GUI 界面，方便监控与操作
